# debian-12.5.0-amd64-DVD-1.iso

# Boot from the ISO and follow the dialogs.
    Set language
    Set keyboard
    Set host name
    Set domain name
    Setup root user/password
    Setup initial user/password
    Set time zone
    Select partition scheme
    Skip scanning media for packages
    Setup mirror for package manager
    Configure popularity contest
    Select Software (disable desktop, enable SSH server, enable standard system utilities)
    Install GRUB boot loader

# Use terminal to get IPA for remote login
    ip a

# Login as initial user and get root
    su
    cd

# Disable CD in apt sources.list
    nano -w /etc/apt/sources.list

# Setup root paths
    mkdir ~/scripts
    mkdir ~/setup
    mkdir ~/source

# Setup update script (update.system.sh file)
    nano -w /usr/local/bin/update.system.sh
    chmod +x /usr/local/bin/update.system.sh
    update.system.sh

# Add a source of Entropy for Virtual Machines.
    apt install -y haveged

# Add Network Tools
    apt install -y net-tools

# Setup file search
    apt install -y apt-file && apt-file update

# Update Timezone
    timedatectl list-timezones
    timedatectl set-timezone "America/Detroit"

# Create a Password Generator (genpw file)
    nano -w /usr/local/bin/genpw
    chmod +x /usr/local/bin/genpw
    genpw

# OPTIONAL: Setup initial crontab for root (crontab.e file)
    crontab -e

# OPTIONAL: Update cron schedules (crontab.sch file)
    cp /etc/crontab /etc/crontab.distro
    nano -w /etc/crontab

# Check Time Sync
    systemctl status systemd-timesyncd

# Update bash settings for users: 'setup' and 'root' (user.bashrc file)

* Generate SSH keys for users:
    ssh-keygen -t rsa
    ssh-keygen -t ed25519
    cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys
    cat ~/.ssh/id_ed25519.pub >> ~/.ssh/authorized_keys
#
# Options
#

# Add sudo support
    su
    apt install -y sudo

# add no-password for sudo user
    nano -w /etc/sudoers.d/username
    username     ALL=(ALL) NOPASSWD:ALL

# Move network setup into source directory (local and ethernet in their own config)
    cp /etc/network/interfaces /etc/network/interfaces.d/lo.inet
    cp /etc/network/interfaces /etc/network/interfaces.d/enX0.inet
    nano -w /etc/network/interfaces 
    nano -w /etc/network/interfaces.d/lo.inet
    nano -w /etc/network/interfaces.d/enX0.inet

    /etc/init.d/networking restart
    systemctl reboot

# Install basic utilities
    apt install -y curl

# Install guest-utilities (If running on Proxmox, XenHypervisor, XCP, etc..)
    apt install -y qemu-guest-agent
    systemctl enable --now qemu-guest-agent
    # enable QEMU support in Proxmox (VM -> Options -> QEMU Guest Agent)
# insert 'guest-tools.iso'
    mkdir /mnt/cdrom
    mount /dev/cdrom /mnt/cdrom
    /mnt/cdrom/Linux/install.sh
    systemctl reboot

# Shutdown to detach any ISOs on the VM and to take a snapshot
    sudo su
    shutdown -h now
